import { defineComponent as k, useSlots as E, inject as f, computed as i, withDirectives as V, openBlock as d, createElementBlock as m, normalizeClass as C, renderSlot as _, Fragment as y, createTextVNode as N, toDisplayString as O, vShow as j, createCommentVNode as L, toRefs as R } from "vue";
import { Props as I } from "./index3.js";
import { TRIGGER_CLOSE_KEY as T } from "../../trigger/src/index3.js";
import { SELECT_PROPS_TOKEN as w } from "../../select/src/index3.js";
import { isString as P, isArray as $, isObject as A } from "../../_utils/is/index.js";
import { useRun as B } from "../../_hooks/use-run/index.js";
var q = /* @__PURE__ */ k({
  name: "FOption",
  __name: "option",
  props: I,
  setup(p) {
    const l = p, s = E(), { run: a } = B(), n = f(w, null), u = f(T, null), o = i(() => {
      if (!s.default)
        return "";
      const e = s.default()[0].children;
      return P(e) ? e : "";
    }), b = i(() => {
      if (!n)
        return !1;
      if (!n.filter)
        return !0;
      const e = o.value || l.label.toString() || l.value.toString(), r = n.childrenLabels.find((t) => t.slot === e);
      return r ? r.show : !0;
    }), v = i(() => {
      const e = l.value || l.label || o.value;
      return n ? e === n.modelValue : !1;
    }), c = (...e) => {
      if (!e || !e.length)
        return "";
      const r = e.find((t) => t == null || Number.isNaN(t) ? !1 : $(t) || A(t) ? Object.keys(t).length > 0 : t === 0 ? !0 : !!t);
      return r !== void 0 ? r : e[e.length - 1];
    }, g = (e) => {
      if (!n || l.disabled)
        return;
      const { value: r, label: t } = R(l), h = c(
        o.value,
        t.value,
        r.value
      ), S = c(
        r.value,
        t.value,
        o.value
      );
      n && a(n.setValue, S, h, e), u && a(u.close);
    };
    return (e, r) => e.$slots.default || e.label || e.value ? V((d(), m("div", {
      key: 0,
      class: C([
        "f-option",
        { "f-option__disabled": e.disabled, "f-option__active": v.value }
      ]),
      onClick: g
    }, [
      e.$slots.default ? _(e.$slots, "default", { key: 0 }) : (d(), m(y, { key: 1 }, [
        N(O(e.label || e.value), 1)
      ], 64))
    ], 2)), [
      [j, b.value]
    ]) : L("", !0);
  }
});
export {
  q as default
};
