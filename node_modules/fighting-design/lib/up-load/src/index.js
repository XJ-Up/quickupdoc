"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("vue"),C=require("./index3.js"),y=require("../../button/index.js"),m=require("../../svg-icon/index.js"),V=require("../../close-btn/index.js"),F=require("../../_svg/f-icon-plus/index.js"),N=require("../../_svg/f-icon-notes/index.js"),E=require("../../_hooks/use-run/index.js");const q={class:"f-up-load"},S=["name","disabled","accept","multiple"],M={key:0,class:"f-up-load__file-list"},$={class:"f-up-load__file-name"};var D=e.defineComponent({name:"FUpLoad",__name:"up-load",props:e.mergeModels(C.Props,{files:{default:[],type:Array},filesModifiers:{}}),emits:["update:files"],setup(s){const a=s,o=e.useModel(s,"files"),{run:u}=E.useRun(),c=e.ref(!1),i=e.ref(),d=()=>{i.value&&i.value.click()},f=l=>{o.value=[...o.value,...l],u(a.onLoad,l)},p=l=>{const{maxSize:t,maxLength:r}=e.toRefs(a);let n=[...l];return t.value&&(n=n.filter(v=>v.size<t.value)),r.value&&(n=n.splice(0,r.value)),n},k=l=>{const t=l.target.files;t&&f(p(t))},g=l=>{o.value.splice(l,1)},h=l=>{l.preventDefault(),c.value=!0},B=l=>{c.value=!1;const t=l.dataTransfer.files;t&&f(p(t))},_=()=>{e.watch(()=>a.files,()=>{u(a.onChange,o.value)},{deep:!0})};return a.onChange&&_(),(l,t)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",q,[l.drag?(e.openBlock(),e.createElementBlock("div",{key:0,class:"f-up-load__drag",onClick:d,onDrop:e.withModifiers(B,["prevent"]),onDragover:e.withModifiers(h,["prevent"])},[e.renderSlot(l.$slots,"default",{},()=>[e.createVNode(e.unref(m.FSvgIcon),{icon:e.unref(F.default)},null,8,["icon"])])],32)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"f-up-load__content",onClick:d},[e.renderSlot(l.$slots,"default",{},()=>[e.createVNode(e.unref(y.FButton),null,{default:e.withCtx(()=>[e.createTextVNode("选择文件")]),_:1})])])),e.createElementVNode("input",{ref_key:"inputRef",ref:i,type:"file",hidden:"",name:l.name,disabled:l.disabled,accept:l.accept,multiple:l.multiple,onChange:k},null,40,S)]),l.showList?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.value&&o.value.length?(e.openBlock(),e.createElementBlock("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(r,n)=>(e.openBlock(),e.createElementBlock("div",{key:n,class:"f-up-load__file-list-item"},[e.createElementVNode("div",$,[e.createVNode(e.unref(m.FSvgIcon),{icon:e.unref(N.default)},null,8,["icon"]),e.createTextVNode(" "+e.toDisplayString(r.name),1)]),l.isRemove?(e.openBlock(),e.createBlock(e.unref(V.FCloseBtn),{key:0,size:14,onClick:v=>g(n)},null,8,["onClick"])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],64))}});exports.default=D;
