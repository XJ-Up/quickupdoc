"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("vue"),V=require("./index3.js"),k=require("../../input/index.js"),F=require("../../dropdown/index.js"),z=require("../../svg-icon/index.js"),N=require("../../_svg/f-icon-chevron-down/index.js"),O=require("../../_utils/get-children/index.js"),R=require("../../_hooks/use-list/index.js"),E=require("../../_utils/is/index.js"),M=require("../../_hooks/use-run/index.js"),P=e.defineComponent({name:"FSelect",__name:"select",props:e.mergeModels(V.Props,{modelValue:{default:"",type:[String,Number]},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const r=f,v=e.useSlots(),a=e.useModel(f,"modelValue"),{run:g}=M.useRun(),{styles:S}=R.useList(r,"select"),u=e.ref([]),y=S(["width"]),s=e.ref(!1),d=e.ref(),o=e.computed(()=>v.default?O.getChildren(v.default(),"FOption"):[]),c=e.computed({get:()=>{var h,b;if(!o.value.length)return"";const l=o.value.filter(w=>{const i=w.props;return i?i.value?`${i.value}`==`${r.modelValue}`:`${i.label}`==`${r.modelValue}`:w.children.default()[0].children===r.modelValue});if(!l.length)return"";const t=l[0],n=t.children&&t.children.default()[0].children,_=(h=t.props)==null?void 0:h.label,m=(b=t.props)==null?void 0:b.value;return n||_||m&&m.toString()||""},set:l=>(a.value=l,l)}),C=(l,t,n)=>{c.value=l.toString(),t!==r.modelValue&&g(r.onChange,l,t,n),a.value=l},$=()=>{(!o.value||!o.value.length)&&(u.value=[]),u.value=o.value.map(l=>{const t=l.children&&l.children.default()[0].children;return{slot:t,show:!!(t&&t.includes(a.value.toString()))}})},q=async()=>{await e.nextTick(),u.value=o.value.map(t=>({slot:t.children&&t.children.default()[0].children,show:!0}));const l=d.value&&d.value.querySelector(".f-option.f-option__active");l&&E.isFunction(l.scrollIntoView)&&l.scrollIntoView({block:"end"})},p=(()=>{if(r.filter)return e.watch(()=>a.value,$,{immediate:!0})})();return e.onBeforeUnmount(()=>{p&&p()}),e.provide(V.SELECT_PROPS_TOKEN,e.reactive({setValue:C,childrenLabels:u,modelValue:e.toRef(r,"modelValue"),filter:e.toRef(r,"filter")})),(l,t)=>(e.openBlock(),e.createElementBlock("div",{class:"f-select",style:e.normalizeStyle(e.unref(y))},[e.createVNode(e.unref(F.FDropdown),{trigger:"click",disabled:l.disabled,width:l.width,"on-open":q},{content:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"secletContentRef",ref:d,class:"f-select__content"},[e.renderSlot(l.$slots,"default")],512)]),default:e.withCtx(()=>[e.createVNode(e.unref(k.FInput),{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),readonly:!l.filter,name:l.name,size:l.size,disabled:l.disabled,placeholder:l.placeholder,clear:l.clear,"on-focus":()=>s.value=!0,"on-blur":()=>s.value=!1},{after:e.withCtx(()=>[e.createVNode(e.unref(z.FSvgIcon),{color:"#bababa",class:e.normalizeClass(["f-select__arrow",{"f-select__arrow-active":s.value}]),size:13,icon:e.unref(N.default)},null,8,["class","icon"])]),_:1},8,["modelValue","readonly","name","size","disabled","placeholder","clear","on-focus","on-blur"])]),_:3},8,["disabled","width"])],4))}});exports.default=P;
