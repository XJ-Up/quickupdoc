"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("vue"),q=require("./index3.js"),p=require("../../svg-icon/index.js"),F=require("../../_utils/is/index.js"),L=require("../../_svg/f-icon-chevron-left/index.js"),S=require("../../_svg/f-icon-chevron-right/index.js"),M=require("../../_hooks/use-calendar/index.js"),b=require("../../_hooks/use-global/index.js"),T=require("../../_hooks/use-run/index.js"),z=require("../../_hooks/use-list/index.js");const H={key:0,class:"f-calendar__header"},U={class:"f-calendar__option"},I={class:"f-calendar__week"},P={class:"f-calendar__day"},Y=["onClick"],j={class:"f-calendar__solar"},G={key:0,class:"f-calendar__lunar"};var O=e.defineComponent({name:"FCalendar",__name:"calendar",props:q.Props,setup(v){const r=v,{getLang:h}=b.useGlobal(),{run:d}=T.useRun(),{styles:_,classes:f}=z.useList(r,"calendar"),{generateCalendar:k}=M.useCalendar(r),s=e.computed(()=>F.isDate(r.date)?r.date:new Date),t=e.reactive({year:s.value.getFullYear(),month:s.value.getMonth()+1,date:s.value.getDate()}),g=e.computed(()=>k(t.year,t.month)),C=e.computed(()=>h("calendar").value.weekList),y=()=>{t.month===1?(t.year-=1,t.month=12):t.month-=1},V=()=>{t.month===12?(t.year+=1,t.month=1):t.month+=1},l={prev:()=>y(),next:()=>V(),current:()=>{t.year=r.date.getFullYear(),t.month=r.date.getMonth()+1,t.date=r.date.getDate()}},u=a=>{l[a]&&l[a]()},x=a=>{const{target:o,day:c}=a;o==="prev"&&l[o](),o==="next"&&l[o](),o==="current"&&(t.date=c,d(r.onChangeDate,t.year,t.month,t.date))},w=e.watch(()=>t.month,a=>{d(r.onChangeMonth,t.year,a,t.date)}),B=e.watch(()=>t,()=>{d(r.onChange,t.year,t.month,t.date)},{deep:!0}),N=(a,o)=>o===t.date&&a===t.month?"f-calendar__day-today":"";e.onUnmounted(()=>{B(),w()});const D=_(["borderColor","dayCellHeight","weekCellHeight"]),E=f(["border"],"f-calendar");return(a,o)=>{const c=e.resolveComponent("f-option"),m=e.resolveComponent("f-select"),$=e.resolveComponent("f-button");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(E)),style:e.normalizeStyle(e.unref(D))},[a.showHeader?(e.openBlock(),e.createElementBlock("header",H,[e.createVNode(e.unref(p.FSvgIcon),{icon:e.unref(L.default),onClick:o[0]||(o[0]=n=>u("prev"))},null,8,["icon"]),e.createElementVNode("div",U,[e.createVNode(m,{modelValue:t.year,"onUpdate:modelValue":o[1]||(o[1]=n=>t.year=n),width:116},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(200,n=>e.createVNode(c,{key:n,value:1900+n},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(1900+n),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e.createVNode(m,{modelValue:t.month,"onUpdate:modelValue":o[2]||(o[2]=n=>t.month=n),width:116},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(12,n=>e.createVNode(c,{key:n,value:n},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e.createVNode($,{type:"default",onClick:o[3]||(o[3]=n=>u("current"))},{default:e.withCtx(()=>[e.createTextVNode("今天")]),_:1})]),e.createVNode(e.unref(p.FSvgIcon),{icon:e.unref(S.default),onClick:o[4]||(o[4]=n=>u("next"))},null,8,["icon"])])):e.createCommentVNode("",!0),e.createElementVNode("div",I,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(n,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:"f-calendar__week-item"},e.toDisplayString(n),1))),128))]),e.createElementVNode("div",P,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(n,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:e.normalizeClass(["f-calendar__day-item",{"f-calendar__day-current":n.target==="current",[N(n.month,n.day)]:n.target==="current"}]),onClick:R=>x(n)},[e.createElementVNode("span",j,e.toDisplayString(n.day),1),a.lunar?(e.openBlock(),e.createElementBlock("span",G,e.toDisplayString(n.lunarFestival||n.festival||n.term||n.lunar),1)):e.createCommentVNode("",!0)],10,Y))),128))])],6)}}});exports.default=O;
