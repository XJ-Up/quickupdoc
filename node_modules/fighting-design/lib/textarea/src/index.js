"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("vue"),H=require("./index3.js"),b=require("../../svg-icon/index.js"),x=require("../../_svg/f-icon-cross/index.js"),q=require("../../_hooks/use-input/index.js"),B=require("../../_hooks/use-list/index.js"),E=require("../../_utils/utils/index.js"),V=require("../../_hooks/use-run/index.js");const z=["rows","disabled","readonly","autofocus","placeholder","name"];var M=e.defineComponent({name:"FTextarea",__name:"textarea",props:e.mergeModels(H.Props,{modelValue:{default:"",type:[Number,String]},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const n=s,l=e.useModel(s,"modelValue"),{handleInput:f,handleClear:c,handleChange:i}=q.useInput(n,l),{classes:m,styles:v}=B.useList(n,"textarea"),{run:h}=V.useRun(),o=e.ref(),g=m(["disabled","autoHeight"],"f-textarea"),p=v(["resize","fontSize"]),u=async()=>{await e.nextTick(),o.value&&(o.value.style.height="auto",o.value.style.height=o.value.scrollHeight+"px")},y=t=>{f(t),n.autoHeight&&u()},w=()=>{const t=e.watch(()=>[n.modelValue,n.rows,n.autoHeight],()=>{u(),n.autoHeight||(t(),o.value&&(o.value.style.height="auto"))},{immediate:!0})},d=E.debounce(u,500);e.onMounted(()=>{n.autoHeight&&(w(),window.addEventListener("resize",d))}),e.onBeforeUnmount(()=>{window.removeEventListener("resize",d)});const k=t=>{if(t.key==="Enter"&&t.ctrlKey){l.value+=`
`,n.autoHeight&&u();return}t.key==="Enter"&&(t.preventDefault(),h(n.onEnter,l.value,t))};return(t,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(g)),style:e.normalizeStyle(e.unref(p))},[e.withDirectives(e.createElementVNode("textarea",{ref_key:"textareaRef",ref:o,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value=r),class:"f-textarea__textarea",rows:t.rows,disabled:t.disabled,readonly:t.readonly,autofocus:t.autofocus,placeholder:t.placeholder,name:t.name,onInput:y,onChange:a[1]||(a[1]=(...r)=>e.unref(i)&&e.unref(i)(...r)),onBlur:a[2]||(a[2]=(...r)=>t.onBlur&&t.onBlur(...r)),onFocus:a[3]||(a[3]=(...r)=>t.onFocus&&t.onFocus(...r)),onKeydown:k},null,40,z),[[e.vModelText,l.value]]),t.clear?(e.openBlock(),e.createBlock(e.unref(b.FSvgIcon),{key:0,class:"f-textarea__clear-btn",icon:e.unref(x.default),size:14,"on-click":e.unref(c)},null,8,["icon","on-click"])):e.createCommentVNode("",!0)],6))}});exports.default=M;
